import os, re

#–ö–æ–ª–∏—á–µ—Å—Ç–≤–æ —Ñ–∞–π–ª–æ–≤ —Å —Å–æ–æ–±—â–µ–Ω–∏—è–º–∏
count_files = len(os.listdir(os.getcwd())) - 1
filename = 'Messages.html'
#–†–µ–≥—É–ª—è—Ä–Ω–æ–µ –≤—ã—Ä–∞–∂–µ–Ω–∏–µ –¥–ª—è –ø–æ–ª—É—á–µ–Ω–∏—è –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –ø—Ä–∏—à–µ–¥—à–∏—Ö –ª–∞–π–∫–æ–≤
pattern = re.compile(r'–ö–æ–º—É-—Ç–æ –ø–æ–Ω—Ä–∞–≤–∏–ª–∞—Å—å —Ç–≤–æ—è –∞–Ω–∫–µ—Ç–∞:<br><br>(.*?)</div>', re.DOTALL)
recieved_likes_data = set()
#–í–∑–∞–∏–º–Ω—ã–µ –ª–∞–π–∫–∏ –æ—Ç –¥—Ä—É–≥–∏—Ö –ª—é–¥–µ–π, –∫–æ—Ç–æ—Ä—ã–µ –ø–æ–ª—É—á–∏–ª–∏  –í–∞—à –ª–∞–π–∫ –ø–µ—Ä–≤—ã–º–∏
common_likes = 0
#–ö–æ–ª–∏—á–µ—Å—Ç–≤–æ –í–∞—à–∏—Ö –¥–∏–∑–ª–∞–π–∫–æ–≤
dislikes = 0
#–ö–æ–ª–∏—á–µ—Å—Ç–≤–æ –í–∞—à–∏—Ö –ª–∞–π–∫–æ–≤
likes = 0
#–ö–æ–ª–∏—á–µ—Å—Ç–≤–æ –ª–∞–π–∫–æ–≤, –∫–æ—Ç–æ—Ä—ã–µ –í—ã –ø–æ—Å—Ç–∞–≤–∏–ª–∏ –ª—é–¥—è–º, –ª–∞–π–∫–Ω—É–≤—à–∏—Ö –í–∞—Å –ø–µ—Ä–≤—ã–º–∏
mutual_received_likes = 0

for i in range(count_files):
    #–ï—Å–ª–∏ –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞–µ—Ç—Å—è –ø–µ—Ä–≤—ã–π —Ñ–∞–π–ª
    file_number = ""
    # –ï—Å–ª–∏ –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞—é—Ç—Å—è –ø–æ—Å–ª–µ–¥—É—é—â–∏–µ —Ñ–∞–π–ª—ã
    if i != 0:
        file_number = str(i + 1)

    with open(filename[:8] + file_number + filename[8:], 'r', encoding='utf-8') as file:
        data = file.read()

    for match in re.finditer(pattern, data):
        recieved_likes_data.add(match.group(1).strip())

    dislikes += data.count('üëé')
    likes += data.count('‚ù§')
    common_likes += data.count('–ï—Å—Ç—å –≤–∑–∞–∏–º–Ω–∞—è —Å–∏–º–ø–∞—Ç–∏—è!')
    mutual_received_likes += data.count('–û—Ç–ª–∏—á–Ω–æ! –ù–∞–¥–µ—é—Å—å —Ö–æ—Ä–æ—à–æ –ø—Ä–æ–≤–µ–¥–µ—Ç–µ –≤—Ä–µ–º—è')

print(f'–û–±—â–µ–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –ø—Ä–æ—Å–º–æ—Ç—Ä–µ–Ω–Ω—ã—Ö –∞–Ω–∫–µ—Ç = {dislikes + likes}')
print(f'–ö–æ–ª–∏—á–µ—Å—Ç–≤–æ –ø–æ—Å—Ç–∞–≤–ª–µ–Ω–Ω—ã—Ö –¥–∏–∑–ª–∞–π–∫–æ–≤ = {dislikes - (len(recieved_likes_data) - mutual_received_likes)}')
print(f'–ö–æ–ª–∏—á–µ—Å—Ç–≤–æ –ø–æ—Å—Ç–∞–≤–ª–µ–Ω–Ω—ã—Ö –ª–∞–π–∫–æ–≤ = {likes - mutual_received_likes}')
print(f'–ö–æ–ª–∏—á–µ—Å—Ç–≤–æ –≤–∑–∞–∏–º–Ω—ã—Ö –ª–∞–π–∫–æ–≤ –æ—Ç –¥–µ–≤—É—à–µ–∫ = {common_likes}')
print(f'–ö–æ–ª–∏—á–µ—Å—Ç–≤–æ –ø–æ–ª—É—á–µ–Ω–Ω—ã—Ö –ª–∞–π–∫–æ–≤ = {len(recieved_likes_data)}')
print(f'–ö–æ–ª–∏—á–µ—Å—Ç–≤–æ –ø–æ–ª–æ–∂–∏—Ç–µ–ª—å–Ω—ã—Ö –æ—Ç–≤–µ—Ç–æ–≤ –Ω–∞ –ø–æ–ª—É—á–µ–Ω–Ω—ã–µ –ª–∞–π–∫–∏ = {mutual_received_likes}')